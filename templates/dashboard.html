{% extends "base.html" %}
{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">

<h2 style="margin-bottom: 8px;">Business Overview – {{ year }}</h2>
<p style="color:#666; margin-bottom:18px;">
    Monthly comparison of sales, payments, receivables, sales orders and expenses
</p>

<div class="chart-card">
    <div class="chart-container">
        <canvas id="trendChart"></canvas>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
const ctx = document.getElementById('trendChart').getContext('2d');

new Chart(ctx, {
    type: 'bar',
    data: {
        labels: {{ months | tojson }},
        datasets: [
            {
                label: 'Sales',
                data: {{ sales | tojson }},
                backgroundColor: '#007bff'
            },
            {
                label: 'Payments',
                data: {{ payments | tojson }},
                backgroundColor: '#28a745'
            },
            {
                label: 'Receivables',
                data: {{ receivables | tojson }},
                backgroundColor: '#dc3545'
            },
            {
                label: 'Sales Orders',
                data: {{ orders | tojson }},
                backgroundColor: '#6f42c1'
            },
            {
                label: 'Expenses',
                data: {{ expenses | tojson }},
                backgroundColor: '#6c757d'
            }
        ]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                position: 'bottom'
            },
            tooltip: {
                callbacks: {
                    label: function(context) {
                        return context.dataset.label + ': ₹' + context.raw.toLocaleString('en-IN');
                    }
                }
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                ticks: {
                    callback: function(value) {
                        return '₹' + value.toLocaleString('en-IN');
                    }
                }
            }
        }
    }
});
</script>

{% endblock %}
